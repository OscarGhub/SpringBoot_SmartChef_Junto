<ion-card class="inventario-card">
  <ion-card-content>
    <div class="input-container">
      <ion-input
        placeholder="Agregar ingrediente..."
        class="inventario-input"
        [readonly]="true"
        (click)="abrirSelector()"
      ></ion-input>
      <ion-button class="boton-mas" (click)="abrirSelector()">
        <img src="../../../assets/images/boton_mas.png" alt="Agregar" />
      </ion-button>
    </div>

    <div class="inventario-elementos" *ngIf="items.length > 0">
      <div class="inventario-elemento" *ngFor="let item of items">
        <span>
          {{ item.descripcion || item.idIngrediente }} - {{ item.cantidad }}
        </span>
        <img
          src="../../../assets/images/boton_eliminar.png"
          class="eliminar-icono"
          alt="Eliminar"
          (click)="eliminarItemBackend(item)"
        />
      </div>
    </div>

    <p *ngIf="items.length === 0" class="texto-vacio">
      Tu inventario está vacío.
    </p>
  </ion-card-content>
</ion-card>

<ion-modal [isOpen]="mostrarSelector" (didDismiss)="cerrarSelector()">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Selecciona ingredientes</ion-title>
      <ion-buttons slot="end">
        <ion-button (click)="cerrarSelector()">Cerrar</ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>
      <ion-item
        *ngFor="let ingrediente of ingredientesDisponibles"
        (click)="agregarItemBackend(ingrediente.id)"
      >
        <span>{{ ingrediente.nombre }} ({{ ingrediente.unidadMedida || 'unidad' }})</span>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-modal>
